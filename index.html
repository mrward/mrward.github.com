
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Matt Ward</title>
  <meta name="author" content="Matt Ward">

  
  <meta name="description" content="Xamarin Studio and MonoDevelop now have support for ASP.NET Core 1.0 RC2 with an alpha release of the .NET Core addin. This is an update of the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lastexitcode.com">
  <link href="/favicon.ico" rel="icon" type="image/x-icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Matt Ward" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34592677-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Matt Ward</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
  
  
  
  
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lastexitcode.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/projects/">Projects</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/06/05/AspNetCoreRC2SupportInXamarinStudio/">ASP.NET Core 1.0 RC2 support in Xamarin Studio</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-06-05T19:02:00+01:00" pubdate data-updated="true">Jun 5<sup>th</sup>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xamarin Studio and MonoDevelop now have support for <a href="https://blogs.msdn.microsoft.com/webdev/2016/05/16/announcing-asp-net-core-rc2/">ASP.NET Core 1.0 RC2</a> with an alpha release of the <a href="https://github.com/mrward/monodevelop-dnx-addin">.NET Core addin</a>.</p>

<p><img src="/images/blog/AspNetCoreRC2SupportInXamarinStudio/WebProjectInSolutionWindow.png" title="ASP.NET Core web project in Solution window" alt="ASP.NET Core web project in Solution window"></p>

<p>This is an update of the original <a href="/blog/2016/01/01/DNXSupportInXamarinStudio/">DNX addin</a> which adds support for .NET Core RC2 and also, thanks to <a href="https://twitter.com/davidkarlas">David Karlaš</a>, adds support for debugging .NET Core applications on the Mac.</p>

<h2>Features</h2>

<ul>
<li> Debugging .NET Core applications with the .NET Core CLR on Mac.</li>
<li> Project templates for console, library and web applications</li>
<li> Code completion</li>
<li> NuGet integration</li>
<li> Solution window integration</li>
</ul>


<h2>Supports</h2>

<ul>
<li> MonoDevelop and Xamarin Studio 6.0 (build 5166). (Note that 6.1 is not yet supported)</li>
<li> <a href="https://www.microsoft.com/net/core">.NET Core 1.0 RC2</a>.</li>
</ul>


<h2>Installing .NET Core SDK</h2>

<p>The <a href="https://www.microsoft.com/net/core">.NET Core SDK</a> needs to be installed separately before using the .NET Core addin. Detailed installation instructions can be found on <a href="https://www.microsoft.com/net/core">Microsoft&rsquo;s .NET Core web site</a>.</p>

<h2>Installing the addin</h2>

<p>The addin is currently available from <a href="http://addins.monodevelop.com/">MonoDevelop&rsquo;s Add-in Repository</a> in the alpha channel. In Xamarin Studio open the Add-in Manager and select the Gallery tab. Click the repository drop down and if <strong>Xamarin Studio Add-in Repository (Alpha Channel)</strong> is not displayed then click Manage Repositories. In the window that opens tick the check box next to Xamarin Studio Add-in Repository (Alpha Channel) and then click the Close button.</p>

<p><img src="/images/blog/AspNetCoreRC2SupportInXamarinStudio/AddinManagerNetCoreAddin.png" title=".NET Core addin selected in Addin Manager dialog" alt=".NET Core addin selected in Addin Manager dialog"></p>

<p>Select the .NET Core addin and then click the Install button.</p>

<p>After installing the .NET Core addin you will need to restart Xamarin Studio before the project templates are available in the New Project dialog.</p>

<h2>Creating a .NET Core project</h2>

<p>There are three project templates available for .NET Core in the New Project dialog.</p>

<p><img src="/images/blog/AspNetCoreRC2SupportInXamarinStudio/NewProjectDialogNetCoreProjectTemplates.png" title="New ASP.NET 5 project templates" alt="New ASP.NET 5 project templates"></p>

<h2>Debugging</h2>

<p>Thanks to <a href="https://twitter.com/davidkarlas">David Karlaš</a> there is a support for debugging .NET Core applications when running on the .NET Core CLR if you have the <a href="http://addins.monodevelop.com/Project/Index/228">VSCode Debugger addin</a> installed.</p>

<p><img src="/images/blog/AspNetCoreRC2SupportInXamarinStudio/DebuggingNetCoreApplication.png" title="Debugging a .NET Core application" alt="Debugging a .NET Core application"></p>

<p>The VSCode Debugger addin is currently available from <a href="http://addins.monodevelop.com/">MonoDevelop&rsquo;s Add-in Repository</a> on the alpha channel.</p>

<p>Debugging .NET Core console and web projects that target the full .NET framework is supported on all platforms. The .NET Core command line tool (dotnet.exe) will create an executable when targeting the full .NET Framework which can be debugged in Xamarin Studio. On Windows the x86 version of the .NET Core SDK needs be installed since Xamarin Studio currently cannot debug x64 applications on Windows.</p>

<h2>Source Code</h2>

<p>The source code for the addin is available on GitHub.</p>

<ul>
<li><a href="https://github.com/mrward/monodevelop-dnx-addin">.NET Core addin source code</a>.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/01/DNXSupportInXamarinStudio/">ASP.NET 5 and DNX support in Xamarin Studio</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-01-01T12:00:00+00:00" pubdate data-updated="true">Jan 1<sup>st</sup>, 2016</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xamarin Studio and MonoDevelop now have support for <a href="http://docs.asp.net/en/latest/dnx/overview.html">ASP.NET 5 and DNX</a> with an alpha release of the <a href="https://github.com/mrward/monodevelop-dnx-addin">DNX addin</a>.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DnxWebProjectInSolutionWindow.png" title="DNX web project in Solution window" alt="DNX web project in Solution window"></p>

<p>The core part of the addin that communicates with the DNX host is taken directly from <a href="https://github.com/OmniSharp/omnisharp-roslyn">OmniSharp</a> and is used mostly unchanged.</p>

<h2>Features</h2>

<ul>
<li> Project templates for console, library and web applications</li>
<li> Code completion</li>
<li> Debugger support with Mono 4.3</li>
<li> NuGet integration</li>
<li> Solution window integration</li>
</ul>


<h2>Supports</h2>

<ul>
<li> MonoDevelop and Xamarin Studio 5.9 and later versions.</li>
<li> ASP.NET 5 RC 1 Update 1 and earlier versions.</li>
</ul>


<h2>Installing ASP.NET 5</h2>

<p><a href="https://get.asp.net/">ASP.NET 5</a> needs to be installed separately before using the DNX addin. There are instructions on <a href="https://get.asp.net/">get.asp.net</a> on how to do this for Mac, Linux and Windows.</p>

<h2>Installing the addin</h2>

<p>The addin is currently available from <a href="http://addins.monodevelop.com/">MonoDevelop&rsquo;s Add-in Repository</a> in the alpha channel. In Xamarin Studio open the Add-in Manager and select the Gallery tab. Click the repository drop down and if <strong>Xamarin Studio Add-in Repository (Alpha Channel)</strong> is not displayed then click Manage Repositories. In the window that opens tick the check box next to Xamarin Studio Add-in Repository (Alpha Channel) and then click the Close button.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/AddingAlphaChannelAddins.png" title="Enabling alpha channel addins" alt="Enabling alpha channel addins"></p>

<p>Back in the Add-in Manager dialog click the Refresh button to update the list of addins. Use the search text box in the top right hand corner of the dialog to search for the addin by typing in <strong>DNX</strong>.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/AddinManagerDnxAddin.png" title="DNX addin selected in Addin Manager dialog" alt="DNX addin selected in Addin Manager dialog"></p>

<p>Select the DNX addin and then click the Install button.</p>

<p>After installing the DNX addin you will need to restart Xamarin Studio before the project templates will be available in the New Project dialog.</p>

<h2>Creating an ASP.NET 5 project</h2>

<p>There are three project templates available for ASP.NET 5 in the New Project dialog.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/NewProjectDialogDnxProjectTemplates.png" title="New ASP.NET 5 project templates" alt="New ASP.NET 5 project templates"></p>

<p>Each of the project templates will create a solution and an .xproj file in the same way as Visual Studio 2015 does. The projects created should be compatible with Visual Studio 2015.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DnxConsoleProjectInSolutionWindow.png" title="DNX console project in Solution window" alt="DNX console project in Solution window"></p>

<h2>Dependencies</h2>

<p>When you create or open an ASP.NET 5 project the NuGet packages it uses will automatically be restored.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/SolutionWindowRestoringNuGetPackages.png" title="Restoring NuGet packages in Solution window" alt="Restoring NuGet packages in Solution window"></p>

<p>In the Solution window the dependencies show a warning icon if they are not resolved and the Dependencies folder shows a message that it is restoring the NuGet packages. Once restored you can expand the Dependencies folder and see the dependency hierarchy.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DnxConsoleProjectDependenciesExpanded.png" title="Dependency hierarchy in Solution window" alt="Dependency hierarchy in Solution window"></p>

<p>If the DNX runtime being used by the solution is not installed then an error icon will be displayed next to the Dependencies folder.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/SolutionWindowDependenciesError.png" title="Dependencies error icon in Solution window" alt="Dependencies error icon in Solution window"></p>

<p>Hovering the mouse over the error icon will show more information about the error.</p>

<h2>Building</h2>

<p>When you build the solution or project any errors and warnings are displayed in the Errors window and in the text editor. No assemblies are generated when you build.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/TextEditorDnxBuildError.png" title="DNX build error in text editor" alt="DNX build error in text editor"></p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DnxBuildErrorsInErrorsWindow.png" title="DNX build errors in Errors window" alt="DNX build errors in Errors window"></p>

<h2>Running</h2>

<p>The main toolbar shows the currently selected command and the framework that will be used when the application is run. These are taken from the project.json file.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DnxCommandsInMainToolbar.png" title="DNX commands in main toolbar" alt="DNX commands in main toolbar"></p>

<p>The screenshot above shows the main toolbar for a web project. There are three entries:</p>

<ul>
<li> web</li>
<li> web DNX 4.5.1</li>
<li> web DNX Core 5.0</li>
</ul>


<p>The first entry will run the web command and use the default runtime which will currently be DNX 4.5.1. The last two entries will run the web command but will explicitly run the application with the specified runtime.</p>

<h2>Debugging</h2>

<p>Thanks to <a href="https://twitter.com/davidkarlas">David Karlaš</a> and <a href="https://github.com/vargaz">Zoltan Varga</a> there is support for debugging DNX applications with DNX 4.5.1 if you have <a href="http://download.mono-project.com/archive/nightly/macos-10-universal/">Mono 4.3</a> installed.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DebuggingDnxApplication.png" title="Debugging a DNX application" alt="Debugging a DNX application"></p>

<p>Debugging ASP.NET 5 projects with the CoreCLR is not supported on Mac nor on Linux. Debugging ASP.NET 5 projects is not supported at all on Windows.</p>

<h2>Adding NuGet Packages</h2>

<p>To add a NuGet package to a project you can right click the Dependencies folder in the Solution window and select Add NuGet Packages, or alternatively you can double click the Dependencies folder.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/AddNuGetPackagesMenuItem.png" title="Add NuGet Packages menu in Solution window" alt="Add NuGet Packages menu in Solution window"></p>

<p>This will open up the Add NuGet Packages dialog. Installing a NuGet package using this dialog will add the NuGet package into the project.json file.</p>

<p>Note that using the Add Packages dialog from the Packages folder will not add the NuGet package into the project.json file and will instead download the package to the packages directory and update the packages.config file.</p>

<h2>Adding Dependencies</h2>

<p>Dependencies can also be added directly into the project.json file. Currently there is no code completion available in the project.json file but changes to the file are monitored and the Dependencies folder will be updated when items are added or removed. New NuGet package dependencies that are added will automatically be restored if they are missing.</p>

<h2>Removing Dependencies</h2>

<p>A dependency can be removed by selecting it in the Solution window, right clicking and selecting Remove, or by pressing the delete key.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/RemoveDependencyMenuItem.png" title="Remove dependency menu in Solution window" alt="Remove dependency menu in Solution window"></p>

<h2>Changing the active framework</h2>

<p>In Visual Studio the active framework can be changed by selecting it from the drop down list at the top of the text editor. Currently using the drop down list at the top of the text editor to change the active framework is not supported in Xamarin Studio. Instead you can right click in the text editor, select Active Framework and then select the framework.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/TextEditorSelectActiveDnxFramework.png" title="Active DNX framework context menu in text editor" alt="Active DNX framework context menu in text editor"></p>

<p>The active framework affects the code completion provided in the text editor. In the screenshot below the active framework has been set to DNX Core and you can see that the DateTime type does not show ToShortDateString in its completion list.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DnxCodeCompletionForActiveFramework.png" title="Code completion for active DNX framework" alt="Code completion for active DNX framework"></p>

<p>You can also see that the code in the #if DNX451 block is grayed out since it is not used with the currently active framework.</p>

<h2>DNX Output</h2>

<p>Output from the DNX host and from OmniSharp can be seen in the DNX Output window. This window can be opened by selecting <strong>DNX Output</strong> from the <strong>View</strong> menu.</p>

<p><img src="/images/blog/DNXSupportInXamarinStudio/DnxOutputWindow.png" title="DNX Output window" alt="DNX Output window"></p>

<p>By default only warnings and errors will be displayed in the DNX Output window. To see more or less information you can change the DNX output verbosity in preferences in the DNX &ndash; General section.</p>

<h2>Known Issues</h2>

<p><strong>kqueue() FileSystemWatcher has reached the maximum number of files to watch</strong></p>

<p> When opening a project with many source files, such as AutoFac, you may see the above FileSystemWatcher error message. To resolve this problem you can set the MONO_MANAGED_WATCHER to false:</p>

<pre><code>export MONO_MANAGED_WATCHER=false
</code></pre>

<p>Xamarin Studio will need to be run from the command line for this environment variable to be used.</p>

<p><strong>project.json file formatting</strong></p>

<p>When adding or removing dependencies from the Solution window will cause the project.json file to be reformatted differently compared to how Visual Studio 2015 formats the file.</p>

<h2>Source Code</h2>

<p>The source code for the addin is available on GitHub.</p>

<ul>
<li><a href="https://github.com/mrward/monodevelop-dnx-addin">DNX addin source code</a>.</li>
</ul>


<p> There is also a <a href="https://github.com/mrward/monodevelop-dnx-addin/tree/roslyn">separate branch</a> that supports MonoDevelop and Xamarin Studio 6.0.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/22/NuGetSupportInXamarinStudio5-10/">NuGet Support in Xamarin Studio 5.10</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-11-22T12:00:00+00:00" pubdate data-updated="true">Nov 22<sup>nd</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xamarin Studio 5.10 was released last week as part of the <a href="https://blog.xamarin.com/introducing-xamarin-4/">Xamarin 4 release</a> and it includes changes to the NuGet support.</p>

<h2>Changes</h2>

<ul>
<li> Support NuGet 2.8.7.</li>
<li> Open readme.txt when a NuGet package is installed.</li>
<li> Support packages.config file named after the project.</li>
<li> Local Copy settings are preserved for references when updating packages.</li>
<li> Do not show Checking for package updates message in status bar.</li>
<li> Do not show warning in the status bar if a NuGet package has PowerShell scripts.</li>
<li> Prevent the solution being closed when NuGet packages are being added.</li>
<li> Removing a NuGet package does not update the Solution window when multiple solutions are open.</li>
<li> Prevent packages.config file being marked as deleted by Git after updating a pre-release NuGet package.</li>
<li> Prevent retargeting a NuGet package marking packages.config as deleted by Git.</li>
<li> Allow Microsoft.ApplicationInsights NuGet package to be installed.</li>
</ul>


<p>More information on all the changes in Xamarin Studio 5.10 can be found in the <a href="http://developer.xamarin.com/releases/studio/xamarin.studio_5.10/xamarin.studio_5.10/">release notes</a>.</p>

<h2>NuGet 2.8.7 support</h2>

<p>Xamarin Studio now supports NuGet 2.8.7. NuGet 2.8.7 adds support for the Universal App Platform (UAP) target framework to support Windows 10 Application Development.</p>

<h2>Open readme.txt when a NuGet package is installed</h2>

<p>A NuGet package can contain a <a href="https://docs.nuget.org/create/creating-and-publishing-a-package#user-content-automatically-displaying-a-readmetxt-file-during-package-installation">readme.txt file</a> which Xamarin Studio will now open and display in the text editor when the NuGet package is installed or updated.</p>

<h2>Preserve Local Copy on Updating Packages</h2>

<p>The Local Copy setting on an assembly reference will now be preserved when updating a NuGet package or retargeting a NuGet package.</p>

<p>By default Local Copy is set to true for assembly references when installing a NuGet package. If you set Local Copy to false for one or more of these references then this setting will now be preserved when updating or retargeting the NuGet package.</p>

<h2>Packages.config file named after project</h2>

<p>NuGet supports multiple projects in the same directory each using their own packages.config file. To allow multiple projects in the same directory to each use their own NuGet packages you can name the packages.config file after each project. In the examples below the project filename is on the left and the corresponding packages.config filename is on the right.</p>

<ul>
<li>Foo.csproj => packages.Foo.config</li>
<li>Bar.csproj => packages.Bar.config</li>
<li>Foo Bar.csproj => packages.Foo_Bar.config</li>
</ul>


<p>Xamarin Studio now checks for the packages.ProjectName.config file first and will use it if it exists, otherwise it will fall back to the default behaviour and use the packages.config file.</p>

<p>Note that a new project without any NuGet packages will use a packages.config file by default. The basic procedure to enable a project specific packages.config file when creating a new project is:</p>

<ol>
<li>Create new project called Foo.</li>
<li>Add a NuGet package to the Foo project.</li>
<li>Rename the packages.config file to packages.Foo.config</li>
<li>Reload the solution in Xamarin Studio.</li>
</ol>


<p>Also note that if you remove all the NuGet packages from a project the packages.ProjectName.config file will be deleted and on adding a new NuGet package the default packages.config file will be used.</p>

<h2>Do not show Checking for package updates message in status bar</h2>

<p>Previously when Xamarin Studio was checking for NuGet package updates a message would appear in the status bar. This status bar message has now been removed since checking for NuGet package updates is a background task and does not prevent Xamarin Studio from being used.</p>

<h2>Do not show warning in the status bar if a NuGet package has PowerShell scripts</h2>

<p>Previously if a NuGet package was installed and it contained PowerShell scripts then a warning was shown in the status bar. Now this message is only shown in the Package Console window.</p>

<h2>Prevent the solution being closed when NuGet packages are being added</h2>

<p>A check is now made when Xamarin Studio is closed to see if NuGet packages are still being installed. If this is the case then a dialog will be displayed indicating that it is not currently possible to close Xamarin Studio allowing the NuGet package to finish installing.</p>

<h2>Bug Fixes</h2>

<p><strong>Removing a NuGet package does not update the Solution window when multiple solutions are open</strong></p>

<p>With two or more solutions opened at the same time the Packages folder would not be updated for all solutions when a NuGet package was removed. This was because Xamarin Studio was not refreshing the Packages folder for all solutions currently open.</p>

<p><strong>Prevent packages.config file being marked as deleted by Git after updating pre-release NuGet package.</strong></p>

<p>If there was only one pre-release NuGet package installed into a project and then a later version of the NuGet package was installed from the Add Packages dialog then the packages.config file was then being shown as deleted by Git instead of modified.</p>

<p>The packages.config file is deleted by NuGet after the old NuGet package is uninstalled if there are no NuGet packages referenced. A special case to handle this was added in Xamarin Studio 5.3 but that only handled updating a NuGet package from the Solution window. Now updating a pre-release from the Add Packages dialog is also handled.</p>

<p><strong>Retargeting a NuGet package marks packages.config as deleted by Git</strong></p>

<p>This is similar to the previous bug. Retargeting a NuGet package will uninstall and then install the NuGet package. If there is only one NuGet package in the project then the packages.config file is deleted and was causing Git to mark the file as deleted instead of updated.</p>

<p><strong>Unable to install Microsoft.ApplicationInsights NuGet package</strong></p>

<p>Xamarin Studio 5.9.2 added support for NuGet 2.8.5 but it was not possible to install the <a href="https://www.nuget.org/packages/Microsoft.ApplicationInsights/">Microsoft.ApplicationInsights NuGet package</a> into a project. It was possible to install it using Visual Studio with NuGet 2.8.3 or higher installed. The error reported by Xamarin Studio was:</p>

<pre><code>Adding Microsoft.ApplicationInsights...
The 'Microsoft.ApplicationInsights' package requires NuGet client version '2.8.50313' or above, but the current NuGet version is '2.8.5.0'.
</code></pre>

<p>Xamarin Studio 5.10 now allows the Microsoft.ApplicationInsights NuGet package to be installed into a project.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/09/TypeScriptAddin0-6Released/">TypeScript Addin 0.6 Released</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-09T15:00:00+01:00" pubdate data-updated="true">Aug 9<sup>th</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A new version of the TypeScript addin for Xamarin Studio and MonoDevelop has been released. The addin is available from <a href="http://addins.monodevelop.com/">MonoDevelop&rsquo;s Add-in Repository</a> in the alpha channel. More details on how to install the addin can be found in the <a href="/blog/2015/04/01/TypeScriptSupportInXamarinStudio/">TypeScript support in Xamarin Studio post</a>.</p>

<h2>Changes</h2>

<ul>
<li>Updated to support <a href="http://blogs.msdn.com/b/typescript/archive/2015/07/20/announcing-typescript-1-5.aspx">TypeScript 1.5</a>.</li>
<li>Linux 32 bit and 64 bit are now supported with a single addin. Thanks to <a href="https://github.com/chrisber">Christian Bernasko</a>.</li>
<li>Allow UMD and System modules to be selected in project options.</li>
</ul>


<p>The separate TypeScript Linux 32 bit addin is now deprecated since the TypeScript addin can now be used on 32 bit and 64 bit versions of Linux.</p>

<h2>Bug Fixes</h2>

<ul>
<li>TypeScript language service host not updated when the project options are changed</li>
</ul>


<p>For example, switching from ES3 to ES6 in the project options could cause the code completion to be incorrect since the language service host compiler settings were not being updated.</p>

<ul>
<li>TypeScript options shown when viewing solution options</li>
</ul>


<p>The TypeScript options are now only available when the project options are selected.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/09/PaketSupportInXamarinStudio/">Paket Support in Xamarin Studio</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-06-09T19:00:00+01:00" pubdate data-updated="true">Jun 9<sup>th</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xamarin Studio and MonoDevelop now have support for <a href="http://fsprojects.github.io/Paket/">Paket</a> with an alpha release of the <a href="https://github.com/mrward/monodevelop-paket-addin">Paket Addin</a>.</p>

<p>Paket is a dependency manager for .NET. The dependencies it supports are <a href="http://fsprojects.github.io/Paket/nuget-dependencies.html">NuGet packages</a>, files from <a href="http://fsprojects.github.io/Paket/github-dependencies.html">GitHub, Gists</a> or files from any <a href="http://fsprojects.github.io/Paket/http-dependencies.html">HTTP source</a>. Paket can be used to maintain project dependencies completely from the command line.</p>

<p>So let us take a look at the support for Paket in Xamarin Studio and MonoDevelop.</p>

<h2>Features</h2>

<ul>
<li> View dependencies and referenced NuGet packages in the Solution window.</li>
<li> Add, remove, update NuGet packages from the Solution window.</li>
<li> Install, restore, simplify NuGet packages from the Solution window.</li>
<li> Check for updated NuGet packages from the Solution window.</li>
<li> Syntax highlighting for all paket files.</li>
<li> Code completion whilst editing the paket.dependencies file.</li>
<li> Integrates with Xamarin Studio&rsquo;s unified search.</li>
<li> paket.dependencies and paket.template file templates.</li>
</ul>


<h2>Installing the addin</h2>

<p>The addin is currently available from <a href="http://addins.monodevelop.com/">MonoDevelop&rsquo;s Add-in Repository</a> in the alpha channel. In Xamarin Studio open the Add-in Manager and select the Gallery tab. Click the repository drop down and if <strong>Xamarin Studio Add-in Repository (Alpha Channel)</strong> is not displayed then click <strong>Manage Repositories&hellip;</strong>. In the window that opens tick the check box next to <strong>Xamarin Studio Add-in Repository (Alpha Channel)</strong> and then click the Close button.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/AddingAlphaChannelAddins.png" title="Enabling alpha channel addins" alt="Enabling alpha channel addins"></p>

<p>Back in the Add-in Manager dialog click the Refresh button to update the list of addins. Use the search text box in the top right hand corner of the dialog to search for the addin by typing in <strong>Paket</strong>.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/AddinManagerPaketAddin.png" title="Paket addin selected in Addin Manager dialog" alt="Paket addin selected in Addin Manager dialog"></p>

<p>Select the Paket addin and then click the <strong>Install&hellip;</strong> button.</p>

<p>Now let us take a look at adding a NuGet package to your project with Paket. This is a simple way to get started with Paket in Xamarin Studio without having to manually create any paket files.</p>

<h2>Adding a NuGet Package</h2>

<p>To add a NuGet package using Paket, right click the project in the Solution window, and select Add &ndash; Add NuGet Packages using Paket.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/AddNuGetPackagesUsingPaketSolutionWindowMenu.png" title="Add NuGet Package using Paket Solution window context menu" alt="Add NuGet Package using Paket Solution window context menu"></p>

<p>The Add NuGet Packages using Paket menu is also available from the main Project menu.</p>

<p>This opens the Add NuGet Packages dialog. Search for the NuGet package you want to use and click the Add Package button.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/AddNuGetPackagesDialog.png" title="Add NuGet Packages dialog" alt="Add NuGet Packages dialog"></p>

<p>The Status Bar will update as the NuGet package is installed.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/JsonNetPackageAddedStatusBarMessage.png" title="Json.NET added status bar message" alt="Json.NET added status bar message"></p>

<p>More detailed information about the installation can be found in the Paket Console window. This can be opened by clicking the Status Bar or from the View &ndash; Pads menu.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/JsonNetPackageAddedPaketConsole.png" title="Json.NET added Paket Console messages" alt="Json.NET added Paket Console messages"></p>

<p>After the NuGet package has been installed successfully you will see two new items in the Solution window. A Paket Dependencies folder and a Paket References folder.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketFoldersInSolutionWindow.png" title="Paket folders in Solution window" alt="Paket folders in Solution window"></p>

<p>These folders show the NuGet packages that are in the paket.dependencies and paket.references files.</p>

<h2>Paket Dependencies Folder</h2>

<p>The Paket Dependencies folder is shown in the Solution window if Xamarin Studio finds a paket.dependencies file in the same directory as the solution. The NuGet packages that are in the paket.dependencies file are shown under this folder.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFolderInSolutionWindow.png" title="Paket Dependencies folder in Solution window" alt="Paket Dependencies folder in Solution window"></p>

<p>Double clicking the folder will open the paket.dependencies file into the text editor. The Paket Dependencies folder also has a context menu where you can run Paket commands.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFolderContextMenu.png" title="Paket Dependencies folder context menu" alt="Paket Dependencies folder context menu"></p>

<p>From the context menu you can Add a NuGet Package as a dependency, install, restore, update, and simplify your dependencies, or check for updates. When you select Check for Updates the updated NuGet package information will be shown in the Paket Console and in the Solution window.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFolderNuGetPackageUpdateInformation.png" title="Paket Dependencies folder NuGet package update information" alt="Paket Dependencies folder NuGet package update information"></p>

<p>To update a single NuGet package you can right click it and select Update. To remove the NuGet package as a dependency you can right click it and select Remove or press delete.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependencyNuGetPackageContextMenu.png" title="Paket Dependencies folder NuGet package context menu" alt="Paket Dependencies folder NuGet package context menu"></p>

<h2>Paket References Folder</h2>

<p>The Paket References folder is shown in the Solution window if Xamarin Studio finds a paket.references file in the same directory as the project. The NuGet packages that are in the paket.references file are shown under this folder. Double clicking the folder will open the paket.references file into the text editor.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketReferencesFolderInSolutionWindow.png" title="Paket References folder in Solution window" alt="Paket References folder in Solution window"></p>

<p>Right clicking the Paket References folder allows you to add a NuGet package to the project.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketReferencesFolderAddPackagesMenu.png" title="Paket References folder context menu" alt="Paket References folder context menu"></p>

<p>A NuGet package can be removed by right clicking it and selecting Remove or by pressing Delete.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketReferencesFolderNuGetPackageContextMenu.png" title="Paket References folder NuGet package context menu" alt="Paket References folder NuGet package context menu"></p>

<h2>Code Completion</h2>

<p>When editing the paket.dependencies file you will get code completion as you type. You can also bring up the code completion list by pressing Ctrl+Space.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFileKeywordCompletion.png" title="paket.dependencies file keyword completion" alt="paket.dependencies file keyword completion"></p>

<p>Keywords that have an associated value will also show code completion after a space is pressed or the first character is typed in.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFileKeywordValueCompletion.png" title="paket.dependencies file keyword value completion" alt="paket.dependencies file keyword value completion"></p>

<p>After the source keyword you will see a list of NuGet package sources that are defined in your NuGet.Config file.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFileNuGetSourceCompletion.png" title="paket.dependencies file NuGet source completion" alt="paket.dependencies file NuGet source completion"></p>

<p>After the nuget keyword you will see a list of NuGet packages.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFileNuGetPackageCompletion.png" title="paket.dependencies file NuGet package completion" alt="paket.dependencies file NuGet package completion"></p>

<p>This list of NuGet packages is currently taken from your local machine&rsquo;s NuGet cache. Currently there is no support for asynchronously searching an online NuGet package source to get the list of NuGet packages.</p>

<h2>Running Paket commands</h2>

<p>Paket commands can be run from the Unified search. If you type in paket you will see some of the Paket commands.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketCommandsInUnifiedSearch.png" title="Paket commands in unified search" alt="Paket commands in unified search"></p>

<p>The syntax for each command is the similar to what the paket.exe console application supports but the commands do not support all the parameters.</p>

<p>As you type more of the command the list of commands will be filtered. To run a command select it and then press the enter key. These commands directly run paket.exe and update the paket files and project files. The status of the current command is shown in the Status Bar and the output from paket.exe is shown in the Paket Console window.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesInstalledStatusBarMessage.png" title="Paket dependencies installed status bar message" alt="Paket dependencies installed status bar message"></p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesInstalledPaketConsoleOutput.png" title="Paket dependencies installed console message" alt="Paket dependencies installed console message"></p>

<p>The Paket Console window will automatically be displayed if there was an error running a command and an error message will be displayed in the Status Bar.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/StatusBarAddNuGetPackagedErrorMessage.png" title="Paket error message in Status Bar" alt="Paket error message in Status Bar"></p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketConsoleAddNuGetPackagedErrorMessage.png" title="Paket console error message" alt="Paket console error message"></p>

<p>Otherwise you can open the Paket Console by clicking the Status Bar.</p>

<h2>Syntax highlighting</h2>

<p>Syntax highlighting is available for all paket files &ndash; paket.dependencies, paket.references, paket.lock and paket.template.</p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketDependenciesFileSyntaxHighlighting.png" title="paket.dependencies file syntax highlighting" alt="paket.dependencies file syntax highlighting"></p>

<p><img src="/images/blog/PaketSupportInXamarinStudio/PaketLockFileSyntaxHighlighting.png" title="paket.lock file syntax highlighting" alt="paket.lock file syntax highlighting"></p>

<p>This brings us to the end of the introduction to Paket support in Xamarin Studio.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/07/NuGetSupportInXamarinStudio5-9-2/">NuGet Support in Xamarin Studio 5.9.2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-06-07T10:00:00+01:00" pubdate data-updated="true">Jun 7<sup>th</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Changes</h2>

<ul>
<li> NuGet 2.8.5 support</li>
<li> NuGet warning and error messages in Status Bar</li>
</ul>


<p>More information on all the changes in Xamarin Studio 5.9.2 can be found in the <a href="http://developer.xamarin.com/releases/studio/xamarin.studio_5.9/xamarin.studio_5.9/">release notes</a>.</p>

<h2>NuGet 2.8.5 support</h2>

<p>Xamarin Studio now supports NuGet 2.8.5.</p>

<p>NuGet 2.8.5 adds support for three new .NET target frameworks: DNX, DNXCore and Core.</p>

<p>With NuGet 2.8.5 supported you can now install the <a href="https://www.nuget.org/packages/xunit/2.1.0-beta2-build2981">latest pre-release version of xUnit</a>.</p>

<h2>NuGet warning and error messages in Status Bar.</h2>

<p>Xamarin Studio 5.9 has a new native Status Bar on the Mac. This new Status Bar has a smaller width so the NuGet warning and error messages could be too long to be displayed. The screenshots below show a NuGet warning and error message in Xamarin Studio 5.9 that do not fit in the Status Bar.</p>

<p><img src="/images/blog/NuGetSupportInXamarinStudio5-9-2/NuGetWarningMessageTruncatedInStatusBar.png" title="NuGet warning message truncated in status bar" alt="NuGet warning message truncated in status bar"></p>

<p><img src="/images/blog/NuGetSupportInXamarinStudio5-9-2/NuGetErrorMessageTruncatedInStatusBar.png" title="NuGet error message truncated in status bar" alt="NuGet error message truncated in status bar"></p>

<p>In Xamarin Studio 5.9.2 the NuGet Status Bar messages have been shortened so they can be displayed in the new Status Bar without being truncated. The screenshots below show the new format of the NuGet warning and error messages shown in the Status Bar.</p>

<p><img src="/images/blog/NuGetSupportInXamarinStudio5-9-2/NuGetShortenedWarningMessageInStatusBar.png" title="Shortened NuGet warning message in status bar" alt="Shortened NuGet warning message in status bar"></p>

<p><img src="/images/blog/NuGetSupportInXamarinStudio5-9-2/NuGetShortenedErrorMessageInStatusBar.png" title="Shortened NuGet error message in status bar" alt="Shortened NuGet error message in status bar"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/10/XamarinComponentsDirectoryConfiguration/">Xamarin Components Directory Configuration</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-05-10T11:00:00+01:00" pubdate data-updated="true">May 10<sup>th</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of the new features introduced in <a href="http://developer.xamarin.com/releases/studio/xamarin.studio_5.9/xamarin.studio_5.9/">Xamarin Studio 5.9</a> is the ability to configure the directory where Xamarin Components are installed to when they are added to a project.</p>

<p>By default, when a Component from the <a href="https://components.xamarin.com/">Xamarin Component store</a> is added to a project, the Component is installed to a Components directory inside the solution&rsquo;s directory.</p>

<p><img src="/images/blog/XamarinComponentsDirectoryConfiguration/DefaultXamarinComponentsDirectoryForSolution.png" title="Default Components directory for a solution" alt="Default Components directory for a solution"></p>

<p>The project will have references added that refer to assemblies inside this Components directory.</p>

<pre><code>&lt;Reference Include="Microsoft.WindowsAzure.Mobile.Ext"&gt;
  &lt;HintPath&gt;..\Components\azure-mobile-services-1.3.1\lib\android\Microsoft.WindowsAzure.Mobile.Ext.dll&lt;/HintPath&gt;
&lt;/Reference&gt;
&lt;Reference Include="Microsoft.WindowsAzure.Mobile"&gt;
  &lt;HintPath&gt;..\Components\azure-mobile-services-1.3.1\lib\android\Microsoft.WindowsAzure.Mobile.dll&lt;/HintPath&gt;
&lt;/Reference&gt;
&lt;Reference Include="Newtonsoft.Json"&gt;
  &lt;HintPath&gt;..\Components\azure-mobile-services-1.3.1\lib\android\Newtonsoft.Json.dll&lt;/HintPath&gt;
&lt;/Reference&gt;
&lt;Reference Include="System.Net.Http.Extensions"&gt;
  &lt;HintPath&gt;..\Components\azure-mobile-services-1.3.1\lib\android\System.Net.Http.Extensions.dll&lt;/HintPath&gt;
&lt;/Reference&gt;
&lt;Reference Include="System.Net.Http.Primitives"&gt;
  &lt;HintPath&gt;..\Components\azure-mobile-services-1.3.1\lib\android\System.Net.Http.Primitives.dll&lt;/HintPath&gt;
&lt;/Reference&gt;
</code></pre>

<p>If a project is shared between multiple solutions then Xamarin Studio can have multiple different Components directories, one for each solution. This can cause Xamarin Studio to modify the hint paths in the project file to use a different Components directory depending on which solution was opened.</p>

<p>A simple way to reproduce this problem is to create one solution with a project that has a Component, then create another solution in a different directory, and add the same project to this new solution. The Component will be downloaded again into the Components directory relative to the new solution and the assembly references in the project file will be modified to use this new Components location.</p>

<p>Now let us take a look at how to solve this problem by configuring the Components directory.</p>

<h2>Configuring the Components Directory</h2>

<p>To configure the Components directory used by a project you can use a components.config file, as shown below.</p>

<pre><code>&lt;components&gt;
  &lt;config&gt;
    &lt;add key="cachePath" value="..\Components" /&gt;
  &lt;/config&gt;
&lt;/components&gt;
</code></pre>

<p>The path specified in the components.config file can be a full path or a relative path. If it is a relative path then it is relative to the directory containing the components.config file.</p>

<p>The path in the components.config file will be normalized so it contains the correct directory separators on non-Windows operating systems, so you can use either a forward slash or a backslash in the path.</p>

<p>Now let us take a look at how Xamarin Studio finds this components.config file.</p>

<p>Xamarin Studio, when a solution is opened, will check for a components.config file in several locations based on the solution&rsquo;s directory. If we have a solution in the directory /Users/matt/Projects/MyAndroidApp/ then the full set of locations checked is as follows:</p>

<ol>
<li> /Users/matt/Projects/MyAndroidApp/.components/components.config</li>
<li> /Users/matt/Projects/MyAndroidApp/components.config</li>
<li> /Users/matt/Projects/components.config</li>
<li> /Users/matt/components.config</li>
<li> /Users/components.config</li>
<li> /components.config</li>
<li> ~/Library/Preferences/Xamarin/Components/components.config</li>
</ol>


<p>Note that on Windows the last location checked is:</p>

<p>  %AppData%\Xamarin\Components\components.config</p>

<p>If you put the components.config file in a directory that is a parent of multiple solutions then all the solutions can use this common components.config file.</p>

<p>If the components.config file is missing or cannot be read then the default Components directory is used, which is inside the solution&rsquo;s directory.</p>

<p>If there is an error whilst reading the components.config file then the error will be logged by Xamarin Studio and the default Components directory will be used.</p>

<p>The Components directory to be used is cached when the solution is loaded so changes made to the components.config file require the solution to be closed and re-opened before Xamarin Studio will use the new settings.</p>

<p>To help diagnose problems when configuring the Components directory Xamarin Studio will log information in the Components.log file. The Components.log file can be found by selecting Open Log Directory from Xamarin Studio&rsquo;s Help menu. Two examples taken from the Components.log file are shown below. The first example shows the message logged when a components.config file cannot be found.</p>

<pre><code>[2015-05-10 11:00:29.0] DEBUG: No components.config file found. Using default path. Files checked: /Users/matt/Projects/MyAndroidApp/.components/components.config
/Users/matt/Projects/MyAndroidApp/components.config
/Users/matt/Projects/components.config
/Users/matt/components.config
/Users/components.config
/components.config
/Users/matt/Library/Preferences/Xamarin/Components/components.config
</code></pre>

<p>The next example shows the message logged when a components.config file is found.</p>

<pre><code>[2015-05-10 11:10:24.1] DEBUG: Using custom components cache path '/Users/matt/Projects/MyAndroidApp/Components'. components.config file found at '/Users/matt/Projects/MyAndroidApp/components.config'.
</code></pre>

<h2>Component Restore</h2>

<p>The latest version of <a href="https://components.xamarin.com/submit/xpkg">xamarin-component.exe</a> also supports using the configured Components directory. Its restore command will restore the Components to the directory as specified in the components.config file.</p>

<pre><code>mono xamarin-component.exe restore path/to/solution.sln
</code></pre>

<p>xamarin-component.exe will look for the components.config file in the same directories as Xamarin Studio.</p>

<h2>Comparison with NuGet</h2>

<p>NuGet has similar behaviour to Components in Xamarin Studio. All NuGet packages are downloaded to a packages directory inside the solution directory by default. To override this behaviour you can create a <a href="https://docs.nuget.org/consume/nuget-config-file">NuGet.Config file</a>. The NuGet.Config file allows the packages directory to be configured through a repositoryPath setting.</p>

<pre><code>&lt;configuration&gt;
  &lt;config&gt;
    &lt;add key="repositoryPath" value="../../packages" /&gt;
  &lt;/config&gt;
&lt;/configuration&gt;
</code></pre>

<p>NuGet will look for this NuGet.Config file in several places. Assuming the solution directory is /Users/matt/Projects/MyAndroidApp/ the NuGet.Config file will be looked for in the locations as shown below:</p>

<ol>
<li> /Users/matt/Projects/MyAndroidApp/.nuget/NuGet.Config</li>
<li> /Users/matt/Projects/MyAndroidApp/NuGet.Config</li>
<li> /Users/matt/Projects/NuGet.Config</li>
<li> /Users/matt/NuGet.Config</li>
<li> /Users/NuGet.Config</li>
<li> /NuGet.config</li>
<li> ~/.config/NuGet/NuGet.Config (Windows: %AppData%\NuGet\NuGet.Config)</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/03/NuGetSupportInXamarinStudio5-9/">NuGet Support in Xamarin Studio 5.9</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-05-03T14:00:00+01:00" pubdate data-updated="true">May 3<sup>rd</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Changes</h2>

<ul>
<li> NuGet 2.8.3 support</li>
<li> Always show Packages folder in Solution window</li>
<li> Target framework change detected on project reload</li>
</ul>


<p>More information on all the new features and changes in Xamarin Studio 5.9 can be found in the <a href="http://developer.xamarin.com/releases/studio/xamarin.studio_5.9/xamarin.studio_5.9/">release notes</a>.</p>

<h2>NuGet 2.8.3 support</h2>

<p>Xamarin Studio now supports NuGet 2.8.3. This allows a NuGet package to target NuGet 2.8.3 explicitly. For example the PCLStorage 1.0.1 NuGet package will not install into Xamarin Studio 5.8, since it requires NuGet 2.8.3, but will install into Xamarin Studio 5.9.</p>

<p>NuGet packages, such as xunit, that target the new ASP.NET target frameworks, ASP.NetCore 5.0 and ASP.Net 5.0, can now be installed into Xamarin Studio now that it supports NuGet 2.8.3. Previously you would see an error message in the Package Console window:</p>

<pre><code>'xunit.core' already has a dependency defined for 'xunit.extensibility.core'.
</code></pre>

<p>Support for NuGet 2.8.5 is planned for Xamarin Studio 5.9.1.</p>

<h2>Always Show Packages Folder in Solution window</h2>

<p>The Packages folder is now always shown in the Solution window even if the project has no NuGet packages. Previously the Packages folder would only be shown if one or more NuGet packages were installed in a project.</p>

<p><img src="/images/blog/NuGetSupportInXamarinStudio5-9/PackagesFolderInSolutionWindow.png" title="Packages folder in Solution window" alt="Packages folder in Solution window"></p>

<h2>Target Framework Change Detected on Project Reload</h2>

<p>Xamarin Studio will detect a project file has been changed outside of Xamarin Studio and will reload the project. Now Xamarin Studio on reloading will detect the project&rsquo;s target framework has been changed and will  check the NuGet packages are compatible with the new target framework. Previously Xamarin Studio would only check the compatibility of NuGet packages if the target framework was changed from within Xamarin Studio via the project options.</p>

<p>This allows Xamarin Studio to check the NuGet packages are compatible when an iOS Classic project is converted to an iOS Unified project using Xamarin Studio&rsquo;s migration tool. The NuGet packages, such as Xamarin.Forms, can then be retargeted by Xamarin Studio using the <a href="blog/2014/08/10/NuGetSupportInXamarinStudio5-2/">Retarget menu</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/04/01/TypeScriptSupportInXamarinStudio/">TypeScript Support in Xamarin Studio</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-04-01T21:00:00+01:00" pubdate data-updated="true">Apr 1<sup>st</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xamarin Studio and MonoDevelop now have support for <a href="http://www.typescriptlang.org/">TypeScript</a> on Linux, Mac and Windows with an alpha release of the <a href="https://github.com/mrward/typescript-addin">TypeScript Addin</a>.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/EditingTypeScriptInTextEditor.png" title="Editing TypeScript in Xamarin Studio on the Mac" alt="Editing TypeScript in Xamarin Studio on the Mac"></p>

<p>The TypeScript addin uses <a href="http://v8dotnet.codeplex.com">V8.NET</a> which is a library that allows a .NET application to host <a href="https://code.google.com/p/v8/">Google&rsquo;s V8 JavaScript engine</a> and have JavaScript interact with .NET objects in the host application.</p>

<p>The ability to support Windows, Mac and Linux would not have been possible without the work done by <a href="http://jameswilkins.net">James Wilkins</a> and <a href="https://github.com/chrisber">Christian Bernasko</a>. <a href="http://jameswilkins.net">James Wilkins</a> created the <a href="http://v8dotnet.codeplex.com">V8.NET</a> library and when it was first released it supported only Windows. <a href="https://github.com/chrisber">Christian Bernasko</a> then took V8.NET and modified it to make it work with Mono on Linux and the Mac. The TypeScript addin is using V8.NET binaries built by Christian from his port of <a href="https://github.com/chrisber/v8dotnet/tree/development-mono">V8.NET</a>.</p>

<p>Please note that this is an alpha release and because V8.NET uses a native library it can cause Xamarin Studio or MonoDevelop to terminate if a bug is encountered.</p>

<h2>Features</h2>

<ul>
<li>TypeScript compilation on save or build.</li>
<li>Code completion.</li>
<li>Find references.</li>
<li>Rename refactoring.</li>
<li>Go to declaration.</li>
<li>Errors highlighted as you type.</li>
<li>Code folding.</li>
</ul>


<p>The addin supports:</p>

<ul>
<li>Xamarin Studio MonoDevelop 5 and above.</li>
<li>TypeScript 1.4</li>
<li>Linux, Mac and Windows.</li>
</ul>


<h2>Installing the addin</h2>

<p>The addin is currently available from <a href="http://addins.monodevelop.com/">MonoDevelop&rsquo;s Add-in Repository</a> in the alpha channel. By default the alpha repository is not enabled so you will have to enable it before you can find and install the addin.</p>

<p>In Xamarin Studio open the Add-in Manager and select the Gallery tab. Click the repository drop down and if <strong>Xamarin Studio Add-in Repository (Alpha Channel)</strong> is not displayed then click <strong>Manage Repositories&hellip;</strong>. In the window that opens tick the check box next to <strong>Xamarin Studio Add-in Repository (Alpha Channel)</strong> and then click the Close button.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/AddingAlphaChannelAddins.png" title="Enabling alpha channel addins" alt="Enabling alpha channel addins"></p>

<p>Back in the Add-in Manager dialog click the Refresh button to update the list of addins. Use the search text box in the top right hand corner of the dialog to search for the addin by typing in <strong>TypeScript</strong>.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/AddinManagerTypeScriptAddin.png" title="TypeScript addin selected in Addin Manager dialog" alt="TypeScript addin selected in Addin Manager dialog"></p>

<p>Select the TypeScript addin and then click the <strong>Install&hellip;</strong> button.</p>

<p>Note that if you are using Linux 32 bit then you should install the <strong>TypeScript Linux 32 bit</strong> addin. The other <strong>TypeScript</strong> addin listed supports Linux 64 bit. Hopefully in the future it will be possible to support both Linux 32 bit and 64 bit using the same addin.</p>

<h2>Getting Started</h2>

<p>Now that the TypeScript addin is installed let us create a TypeScript file.</p>

<p>To add a TypeScript file open the New File dialog, select the <strong>Web</strong> category and select <strong>Empty TypeScript</strong> file.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/NewFileDialogNewTypeScriptFile.png" title="New File Dialog - New TypeScript File" alt="New File Dialog - New TypeScript File"></p>

<p>Give the file a name and click the New button.</p>

<p>Note that currently the TypeScript file needs to be included in a project. Standalone TypeScript project files are not supported. TypeScript files can be added to any .NET project.</p>

<h2>Code Completion</h2>

<p>When editing the TypeScript code you will have code completion when you press the dot character.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptCodeCompletion.png" title="TypeScript dot code completion" alt="TypeScript dot code completion"></p>

<p>Code completion also works when you type the opening bracket of a function.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptMethodCompletion.png" title="TypeScript method completion" alt="TypeScript method completion"></p>

<h2>Go to Declaration</h2>

<p>The text editor&rsquo;s right click menu has three TypeScript menus: Go to Declaration, Find References and Rename.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptTextEditorContextMenu.png" title="Text editor context menu with TypeScript menu options" alt="Text editor context menu with TypeScript menu options"></p>

<p>The Go To Declaration menu option will open the corresponding definition in the text editor.</p>

<h2>Find References</h2>

<p>Find References will show the references in the Search Results window.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptReferencesInSearchResults.png" title="TypeScript references shown in Search Results window" alt="TypeScript references shown in Search Results window"></p>

<h2>Rename</h2>

<p>Selecting the Rename menu option in the text editor will open the Rename dialog where you can type in a new name and click OK to have it updated.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptRenameDialog.png" title="TypeScript rename dialog" alt="TypeScript rename dialog"></p>

<p>Note that currently on Linux the Rename dialog will only be displayed if the keyboard shortcut F2 is used. Selecting the context menu will not show the Rename dialog on Linux but will work on Windows and on the Mac.</p>

<h2>Error Highlighting</h2>

<p>Errors in your TypeScript code will be highlighted as you are typing in the text editor.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptErrorsHighlightedInTextEditor.png" title="TypeScript errors highlighted in text editor" alt="TypeScript errors highlighted in text editor"></p>

<h2>Code Folding</h2>

<p>Code folding is supported for TypeScript classes, modules and interfaces.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptCodeFolding.png" title="TypeScript code folding" alt="TypeScript code folding"></p>

<p>Code folding by default is disabled. To enable code folding open the Preferences dialog and in the Text Editor section select the General category, then tick the <strong>Enable code folding</strong> check box.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/PreferencesEnableCodeFolding.png" title="Preferences - Enabling code folding" alt="Preferences - Enabling code folding"></p>

<h2>Compiling to JavaScript</h2>

<p>By default the TypeScript files will be compiled to JavaScript when the project is compiled.</p>

<p>There are more compiler options available in the project options in the Build &ndash; TypeScript category.</p>

<p><img src="/images/blog/TypeScriptSupportInXamarinStudio/TypeScriptCompilerOptions.png" title="TypeScript compiler options for the project" alt="TypeScript compiler options for the project"></p>

<p>On this page you can change when the compiler is run and what options are passed to the compiler when generating JavaScript code.</p>

<p>If an <strong>Output file</strong> is specified then all the TypeScript files will be compiled into a single JavaScript file. If an <strong>Output directory</strong> is specified then the JavaScript files will be generated in that directory instead of next to the TypeScript files.</p>

<p>That is the end of our quick look at TypeScript support in Xamarin Studio and MonoDevelop.</p>

<h2>Source Code</h2>

<p>The source code for the addin and for the V8.NET engine that works on Mono are available on GitHub.</p>

<ul>
<li><p><a href="ttps://github.com/mrward/typescript-addin/tree/monodevelop-v8-dotnet">TypeScript addin source code</a>.</p></li>
<li><p><a href="https://github.com/chrisber/v8dotnet/tree/development-mono">V8.NET source code</a>.</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/21/NuGetSupportInXamarinStudio5-8/">NuGet Support in Xamarin Studio 5.8</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-21T12:00:00+00:00" pubdate data-updated="true">Mar 21<sup>st</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Xamarin Studio 5.8 <a href="http://blog.xamarin.com/xamarin-releases-watch-kit-support-like-clockwork/">added support for Apple&rsquo;s Watch Kit</a> and it also includes some NuGet bug fixes.</p>

<h2>Bug Fixes</h2>

<ul>
<li> Allow ASP.NET project templates to work offline.</li>
<li> Build error after updating Xamarin.Forms in a project created by Visual Studio</li>
<li> Custom MSBuild task not updated after updating Xamarin.Forms</li>
<li> Update information in the Solution window incorrect after updating packages</li>
<li> Check for package updates continues after closing a solution</li>
<li> Check for package updates prevents packages from being removed</li>
<li> Incorrect error message displayed when checking for package updates</li>
<li> Exception when checking for package updates after changing target framework of a project</li>
</ul>


<p>More information on all the new features and changes in Xamarin Studio 5.8 can be found in the <a href="http://developer.xamarin.com/releases/studio/xamarin.studio_5.8/xamarin.studio_5.8/">release notes</a>.</p>

<p><strong>Allow ASP.NET project templates to work offline</strong></p>

<p>Previously it was not possible to create an ASP.NET project without an internet connection even if all the NuGet packages were available in the local machine&rsquo;s NuGet packages cache.</p>

<p>Now the local machine&rsquo;s NuGet cache is used as the primary source of packages for project templates so it is possible to create an ASP.NET project without an internet connection if the NuGet packages are already in this cache.</p>

<p>This problem did not affect project templates, such as Xamarin.Forms, which include the NuGet packages with their project templates.</p>

<p><strong>Build error after updating Xamarin.Forms in a project created by Visual Studio</strong></p>

<p>When a NuGet package that uses custom MSBuild targets file, such as Xamarin.Forms, is added to a project by Visual Studio the project file has an extra Target added, as shown below.</p>

<pre><code>&lt;Target Name="EnsureNuGetPackageBuildImports" BeforeTargets="PrepareForBuild"&gt;
  &lt;PropertyGroup&gt;
    &lt;ErrorText&gt;This project references NuGet package(s) that are missing on this computer.
Enable NuGet Package Restore to download them.  For more information, see
http://go.microsoft.com/fwlink/?LinkID=322105. The missing file is {0}.&lt;/ErrorText&gt;
  &lt;/PropertyGroup&gt;
  &lt;Error Condition="!Exists('packages\Xamarin.Forms.1.2.1.6229\build\portable-win+net45+wp80+MonoAndroid10+MonoTouch10\Xamarin.Forms.targets')" Text="$([System.String]::Format('$(ErrorText)', 'packages\Xamarin.Forms.1.2.1.6229\build\portable-win+net45+wp80+MonoAndroid10+MonoTouch10\Xamarin.Forms.targets'))" /&gt;
&lt;/Target&gt;
</code></pre>

<p>When the project was opened in a previous version of Xamarin Studio, and the NuGet package is updated or removed, the Error task was not updated. The project would then fail to compile with an error being reported that the old .targets file could not be found.</p>

<p>Now when updating or removing a NuGet package the EnsureNuGetPackageBuildImports target is
checked and the matching Error task will be removed. If there are no remaining Error tasks then the EnsureNuGetPackageBuildImports target is also removed. This prevents build errors after updating or uninstalling the old
NuGet package from the project.</p>

<p>Note that Xamarin Studio will not add an EnsureNuGetPackageBuildImports target and will not add Error tasks to a project when a NuGet package is added or updated.</p>

<p><strong>Custom MSBuild task not updated after updating Xamarin.Forms</strong></p>

<p>If a project that had a reference to Xamarin.Forms was compiled once, then the NuGet package was updated, the old MSBuild task was still being used when compiling.</p>

<p>For Xamarin.Forms this could cause a &ldquo;XamlG Task failed unexpectedly&rdquo; build error to be reported. Also the Package Console would report not being able to access the Xamarin.Forms.Build.Tasks.dll when updating or removing the NuGet package.</p>

<p>The problem was that MonoDevelop.Projects.Formats.MSBuild.exe that compiles the project would lock the MSBuild task assembly.</p>

<p>Now when an MSBuild import is removed on updating a NuGet package Xamarin Studio will dispose the current project builder which will shutdown the MonoDevelop.Projects.Formats.MSBuild.exe process. This unlocks any custom MSBuild task assemblies loaded by this process,
allowing the old NuGet package to be removed without any access denied errors, and when the project is recompiled again it will use the correct MSBuild task assembly.</p>

<p><strong>Update information in the Solution window incorrect after updating packages</strong></p>

<p>With check for updates enabled in Preferences, when an ASP.NET project is created, updates are shown as available for several packages. When
the packages are updated the Solution window would still show updates as being available even though the packages had been updated.</p>

<p>The problem was that a change was made in Xamarin Studio 5.7 to update package dependencies at the same time as the package was updated. This meant that an update event was not fired for each
package being updated which would result in some package updates being shown as available in the Solution window even when they had been updated.</p>

<p>Now Xamarin Studio will check all package references when a package is updated so if any package dependencies are updated the Solution
window will show the correct status of the packages.</p>

<p><strong>Check for package updates continues after closing a solution</strong></p>

<p>Xamarin Studio will now stop checking for package updates when the current solution is closed. Previously this would continue until the check was completed.</p>

<p><strong>Check for updates prevents packages from being removed</strong></p>

<p>Previously when Xamarin Studio was checking for package updates all other NuGet actions, such as updating, adding or removing packages, would not be run until the check for updates had completed.
Now the check for NuGet package updates is done on a separate thread so other NuGet actions can be run at the same time.</p>

<p><strong>Incorrect error message displayed when checking for package updates</strong></p>

<p>The Package Console would sometimes show the error message &ldquo;An exception was thrown while dispatching a method call in the UI thread.&rdquo; instead of the underlying error making it difficult to determine the cause of the problem.
For example if there was a zero byte sized .nupkg file in the solution&rsquo;s package directory, and check for updates is enabled, then
the wrong error was displayed in the Package Console.</p>

<p><strong>Exception when checking for package updates after changing target framework of a project</strong></p>

<p>Previously a null reference exception would be reported in the Package console window when doing the following:</p>

<ol>
<li> Create a project with one NuGet package added.</li>
<li> Create two NuGet package sources in Preferences. Disable all other package sources.</li>
<li> Open the Add Packages dialog and select All Sources.</li>
<li> Go back to Preferences and uncheck both of the package sources.</li>
<li> Change the target framework of the project in the project options.</li>
</ol>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Matt Ward -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
